<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ğŸ“¡ GPS ì¢Œí‘œ í™•ì¸ê¸°</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.9.0/proj4.js"></script>

<style>
body { background:#111; color:#fff; font-family:Arial; padding:20px; }
h1 { color:#00eaff; text-align:center; }
.status { text-align:center; font-size:14px; color:#7dd3fc; margin-bottom:10px; }
button { width:100%; padding:14px; font-size:18px; background:#00eaff; border:none; border-radius:8px; }
.box { background:#222; padding:15px; border-radius:8px; margin-top:10px; }
.label { color:#aaa; font-size:14px; }
.value { font-size:17px; }
</style>
</head>

<body>

<h1>ğŸ“¡ GPS ì¢Œí‘œ í™•ì¸</h1>
<div id="status" class="status">ğŸ“¡ GPS ëŒ€ê¸°ì¤‘â€¦</div>

<button onclick="getLocation()">ğŸ“¡ í˜„ì¬ ìœ„ì¹˜ ìˆ˜ì‹ </button>

<div class="box"><div class="label">ìœ„ë„ / ê²½ë„</div><div id="latlon" class="value">-</div></div>
<div class="box"><div class="label">ë„ë¶„ì´ˆ (DMS)</div><div id="dms" class="value">-</div></div>
<div class="box"><div class="label">UTM-K</div><div id="utmk" class="value">-</div></div>
<div class="box"><div class="label">êµ­ê°€ì§€ì ë²ˆí˜¸</div><div id="national" class="value">-</div></div>

<script>
proj4.defs("EPSG:5179",
  "+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +units=m +no_defs"
);

function getLocation() {
  const status = document.getElementById("status");
  status.textContent = "ğŸ“¡ ìœ„ì„± ìˆ˜ì‹ ì¤‘â€¦";

  navigator.geolocation.getCurrentPosition(pos => {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;
    const acc = Math.round(pos.coords.accuracy);

    status.textContent = `âœ… ìˆ˜ì‹  ì™„ë£Œ (Â±${acc}m)`;
    processCoord(lat, lon);
  }, () => {
    status.textContent = "âŒ GPS ìˆ˜ì‹  ì‹¤íŒ¨";
  }, { enableHighAccuracy:true });
}

function processCoord(lat, lon) {
  document.getElementById("latlon").innerText = `${lat.toFixed(6)}, ${lon.toFixed(6)}`;
  document.getElementById("dms").innerText = toDMS(lat, lon);

  const [x, y] = proj4("WGS84", "EPSG:5179", [lon, lat]);
  document.getElementById("utmk").innerText = `E ${Math.floor(x)} N ${Math.floor(y)}`;
  document.getElementById("national").innerText = `${Math.floor(x/100)} ${Math.floor(y/100)}`;
}

function dms(v){
  const d = Math.floor(Math.abs(v));
  const m = Math.floor((Math.abs(v)-d)*60);
  const s = (((Math.abs(v)-d)*60-m)*60).toFixed(2);
  return `${d}Â° ${m}' ${s}"`;
}

function toDMS(lat, lon){
  return `N ${dms(lat)} / E ${dms(lon)}`;
}
</script>

</body>
</html>
