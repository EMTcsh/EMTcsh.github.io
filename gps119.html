<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ†˜ ì‚°ì•…ì‚¬ê³  ìœ„ì¹˜íŒŒì•…</title>

<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ff9e145029506d6e4c72d1f2b01ea424&libraries=services"></script>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 16px;
  padding-bottom: 120px;
  background: #f4f6f8;
}
h1, h2, h4 { text-align: center; }

button {
  padding: 14px;
  font-size: 16px;
  margin: 6px 0;
  width: 100%;
  border-radius: 10px;
  border: none;
  background: #2DB400;
  color: white;
  font-weight: bold;
}

.box {
  border: 1px solid #ccc;
  padding: 20px;
  margin-top: 12px;
  background: #ffffff;
  border-radius: 12px;
  text-align: center;
  font-size: 1.2rem;
}

.guide {
  margin-top: 15px;
  padding: 14px;
  background: #e8f5e9;
  border-left: 6px solid #2DB400;
  border-radius: 8px;
  font-size: 14px;
}

.map {
  width: 100%;
  height: 320px;
  margin-top: 12px;
  border-radius: 12px;
}

/* í•˜ë‹¨ ê³ ì • */
.bottom-fixed {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #2DB400;
  padding: 12px;
  text-align: center;
}
.bottom-fixed button {
  background: white;
  color: #2DB400;
  font-size: 18px;
  width: 90%;
  max-width: 420px;
}

/* ì¢Œí‘œ ì…ë ¥ */
.coord-input {
  width: 100%;
  font-size: 16px;
  padding: 12px;
  margin: 6px 0 14px 0;
  border: 2px solid #2DB400;
  border-radius: 8px;
}
</style>
</head>

<body>

<h4>[ ë¬´ë“±ì‚°êµ­ë¦½ê³µì› - êµ¬ì¡°ëŒ€ ]</h4>
<h1>ğŸ†˜ ì‚°ì•…ì‚¬ê³  ìœ„ì¹˜íŒŒì•…</h1>

<button id="getLocation">ğŸ“ ë‚´ ìœ„ì¹˜ í™•ì¸</button>

<div class="box" id="coord">ìœ„ì¹˜ ë¯¸í™•ì¸</div>

<div class="guide">
âœ” ë‚´ ìœ„ì¹˜ í™•ì¸<br>
âœ” ìš”êµ¬ì¡°ì ìœ„Â·ê²½ë„ ì…ë ¥<br>
âœ” ëŒ€ìƒ ìœ„ì¹˜ ì§€ë„ í‘œì‹œ<br>
âœ” í•˜ë‹¨ ë²„íŠ¼ â†’ ì¹´ì¹´ì˜¤ë§µ ê²½ë¡œ ë”°ë¼ê°€ê¸°
</div>

<h2>ğŸŒ ìš”êµ¬ì¡°ì ìœ„ì¹˜ì¢Œí‘œ ì…ë ¥</h2>

<input type="number" step="any" inputmode="decimal"
       id="otherLatitude" class="coord-input"
       placeholder="ëŒ€ìƒ ìœ„ë„">

<input type="number" step="any" inputmode="decimal"
       id="otherLongitude" class="coord-input"
       placeholder="ëŒ€ìƒ ê²½ë„">

<button onclick="showLocations()">ğŸ“ ëŒ€ìƒ ìœ„ì¹˜ ì§€ë„ ë³´ê¸°</button>

<div id="distanceInfo" class="box"></div>
<div id="mapComparison" class="map"></div>

<!-- í•˜ë‹¨ ê³ ì • -->
<div class="bottom-fixed">
  <button id="kakaoRoute">ğŸ§­ ìš”êµ¬ì¡°ì ìœ„ì¹˜ ê²½ë¡œ ë”°ë¼ê°€ê¸°</button>
</div>

<script>
let currentLat, currentLng;
let targetLat, targetLng;

/* ë‚´ ìœ„ì¹˜ */
getLocation.onclick = () => {
navigator.geolocation.getCurrentPosition(pos => {
  currentLat = pos.coords.latitude;
  currentLng = pos.coords.longitude;
  coord.textContent = `${currentLat.toFixed(6)} / ${currentLng.toFixed(6)}`;
}, () => alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
};

/* ì¹´ì¹´ì˜¤ë§µ ê²½ë¡œ */
kakaoRoute.onclick = () => {
if (!targetLat || !targetLng) {
  alert("ëŒ€ìƒ ìœ„ì¹˜ë¥¼ ë¨¼ì € í™•ì¸í•˜ì„¸ìš”.");
  return;
}
location.href =
`kakaomap://route?ep=${targetLat},${targetLng}&by=FOOT`;
};

/* ëŒ€ìƒ ìœ„ì¹˜ í‘œì‹œ */
function showLocations() {
targetLat = parseFloat(otherLatitude.value);
targetLng = parseFloat(otherLongitude.value);

if (!currentLat || !currentLng || isNaN(targetLat) || isNaN(targetLng)) {
  alert("ì¢Œí‘œë¥¼ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”.");
  return;
}

const map = new kakao.maps.Map(mapComparison, {
  center: new kakao.maps.LatLng(targetLat, targetLng),
  level: 7
});

const myPos = new kakao.maps.LatLng(currentLat, currentLng);
const otherPos = new kakao.maps.LatLng(targetLat, targetLng);

new kakao.maps.Marker({ position: myPos, map });
new kakao.maps.Marker({ position: otherPos, map });

const line = new kakao.maps.Polyline({ path: [myPos, otherPos] });
const distance = line.getLength();

distanceInfo.textContent =
`ì§ì„ ê±°ë¦¬: ${(distance/1000).toFixed(2)} km`;
}
</script>

</body>
</html>

