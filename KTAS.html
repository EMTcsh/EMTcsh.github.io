<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KTAS의 5단계 증상에 따른 중증도/긴급도 분류 </title>
    <style>
        table {
            border-collapse: collapse;
            width: 83%;
            margin: auto;
            text-align: center;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        .result {
            margin: 20px auto;
            text-align: center;
            width: 80%;
            border: 1px solid #ddd;
            padding: 10px;
            display: none;
        }
        .button-container {
            text-align: center;
            margin: 20px 0;
        }
        .symptom {
            text-align: left; /* 왼쪽 정렬 */
        }
    </style>
</head>
<body>

<h1 style="text-align: center;">증상에 따른 중증도/긴급도 분류 KTAS의 5단계</h1>

<table>
    <thead>
        <tr>
            <th>KTAS 5 단계</th>
            <th>대기실에서 재평가</th>
            <th class="symptom">증상</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="background-color: #ffcccc;"><strong>KTAS 1</strong><br><span>Level 1 - 소생</span></td>
            <td>즉시</td>
            <td class="symptom">
                <input type="checkbox" name="symptom1" value="심장 질환으로 인한 심정지"> 심장 질환으로 인한 심정지<br>
                <input type="checkbox" name="symptom1" value="호흡 부전으로 인한 심정지"> 호흡 부전으로 인한 심정지<br>
                <input type="checkbox" name="symptom1" value="중증 외상(쇼크)"> 중증 외상(쇼크)<br>
                <input type="checkbox" name="symptom1" value="호흡곤란(중증의 호흡 부전)"> 호흡곤란(중증의 호흡 부전)<br>
                <input type="checkbox" name="symptom1" value="의식 장애(무의식 상태, GCS 3-8)"> 의식 장애(무의식 상태, GCS 3-8)
            </td>
            <td><strong>최우선순위</strong></td>
        </tr>
        <tr>
            <td style="background-color: #ffebcc;"><strong>KTAS 2</strong><br><span>Level 2 - 응급 2 단계</span></td>
            <td>10분 마다</td>
            <td class="symptom">
                <input type="checkbox" name="symptom2" value="호흡곤란(중증도 호흡부전)"> 호흡곤란(중증도 호흡부전)<br>
                <input type="checkbox" name="symptom2" value="토혈"> 토혈<br>
                <input type="checkbox" name="symptom2" value="고혈압(증상을 동반한)"> 고혈압(증상을 동반한)<br>
                <input type="checkbox" name="symptom2" value="의식장애(GCS 9-13)"> 의식장애(GCS 9-13)<br>
                <input type="checkbox" name="symptom2" value="발열"> 발열<br>
                <input type="checkbox" name="symptom2" value="흉통, 빈 심인성"> 흉통, 빈 심인성<br>
                <input type="checkbox" name="symptom2" value="복통(8점 이상의 심한 통증)"> 복통(8점 이상의 심한 통증)<br>
                <input type="checkbox" name="symptom2" value="두통(처음 겪는 갑작스럽고 심한 통증)"> 두통(처음 겪는 갑작스럽고 심한 통증)<br>
                <input type="checkbox" name="symptom2" value="중증 외상- 둔상"> 중증 외상- 둔상
            </td>
            <td><strong>2순위</strong></td>
        </tr>
        <tr>
            <td style="background-color: #ffffcc;"><strong>KTAS 3</strong><br><span>Level 3 - 응급 3 단계</span></td>
            <td>30분 마다</td>
            <td class="symptom">
                <input type="checkbox" name="symptom3" value="호흡곤란(경한 호흡부전)"> 호흡곤란(경한 호흡부전)<br>
                <input type="checkbox" name="symptom3" value="고혈압(증상이 없는)"> 고혈압(증상이 없는)<br>
                <input type="checkbox" name="symptom3" value="구토와/혹은 오심"> 구토와/혹은 오심<br>
                <input type="checkbox" name="symptom3" value="복통(4-7점의 중증도 통증)"> 복통(4-7점의 중증도 통증)<br>
                <input type="checkbox" name="symptom3" value="두통(4-7점의 중증도 통증)"> 두통(4-7점의 중증도 통증)<br>
                <input type="checkbox" name="symptom3" value="설사(조절되지 않는 혈성 설사)"> 설사(조절되지 않는 혈성 설사)
            </td>
            <td><strong>3순위</strong></td>
        </tr>
        <tr>
            <td style="background-color: #ccffcc;"><strong>KTAS 4</strong><br><span>Level 4 - 응급 4 단계</span></td>
            <td>60분 마다</td>
            <td class="symptom">
                <input type="checkbox" name="symptom4" value="착란(만성)"> 착란(만성)<br>
                <input type="checkbox" name="symptom4" value="요로 감염 증상"> 요로 감염 증상<br>
                <input type="checkbox" name="symptom4" value="변비"> 변비<br>
                <input type="checkbox" name="symptom4" value="NRS 4점 이하의 경한 통증"> NRS 4점 이하의 경한 통증
            </td>
            <td><strong>4순위</strong></td>
        </tr>
        <tr>
            <td style="background-color: #e6f7ff;"><strong>KTAS 5</strong><br><span>Level 5 - 응급 5 단계</span><br><span>(경증)</span></td>
            <td>120분 마다</td>
            <td class="symptom">
                <input type="checkbox" name="symptom5" value="설사(경증, 탈수 증상 없음)"> 설사(경증, 탈수 증상 없음)<br>
                <input type="checkbox" name="symptom5" value="심하지 않은 물린 상처"> 심하지 않은 물린 상처<br>
                <input type="checkbox" name="symptom5" value="상처 소독(복잡하지 않은)"> 상처 소독(복잡하지 않은)<br>
                <input type="checkbox" name="symptom5" value="약 처방"> 약 처방
            </td>
            <td><strong>5순위</strong></td>
        </tr>
    </tbody>
</table>

<div class="button-container">
    <button onclick="showResults()">저장 결과 보기</button>
    <button onclick="downloadResults()">결과 다운로드</button>
</div>

<div id="results" class="result"></div>

<script>
   function showResults() {
    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = '<h2>선택한 증상:</h2>';
    
    const currentTime = new Date().toLocaleString(); // 현재 시간
    resultsDiv.innerHTML += `<p>저장 시간: ${currentTime}</p>`; // 현재 시간 추가

    for (let i = 1; i <= 5; i++) {
        const checkboxes = document.querySelectorAll(`input[name="symptom${i}"]:checked`);
        if (checkboxes.length > 0) {
            resultsDiv.innerHTML += `<h3>KTAS ${i} 단계</h3>`;
            resultsDiv.innerHTML += `<p>대기실에서 재평가: ${getEvaluationTime(i)}</p>`;
            resultsDiv.innerHTML += `<p>순위: ${i}순위</p>`;
            checkboxes.forEach((checkbox) => {
                resultsDiv.innerHTML += `<p>${checkbox.value}</p>`;
            });
        }
    }

    if (resultsDiv.innerHTML === '<h2>선택한 증상:</h2>') {
        resultsDiv.innerHTML += '<p>선택된 증상이 없습니다.</p>';
    }

    resultsDiv.style.display = 'block';
}

    function getEvaluationTime(level) {
        switch (level) {
            case 1: return '즉시';
            case 2: return '10분 마다';
            case 3: return '30분 마다';
            case 4: return '60분 마다';
            case 5: return '120분 마다';
            default: return '';
        }
    }

    function downloadResults() {
        const resultsDiv = document.getElementById('results');
        const resultsText = resultsDiv.innerText || '선택된 증상이 없습니다.';
        const blob = new Blob([resultsText], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = '저장결과.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }
</script>

</body>
</html>
