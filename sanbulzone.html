<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>무등산 산불관리 상황판</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      background-color: #f3f4f6;
    }
    #map-container {
      flex: 1;
      position: relative;
    }
    #map {
      height: 100%;
      width: 100%;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .info-panel {
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body class="bg-gray-100">

  <div class="p-4 sm:p-8">
    <header class="text-center">
      <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800 tracking-tight">무등산 산불관리 상황판</h1>
      <p class="mt-2 text-lg text-gray-600">위성 지도를 통해 산불 위험 지역을 모니터링하고 관리합니다.</p>
    </header>
  </div>

  <main class="flex flex-col lg:flex-row p-4 sm:p-8 pt-0 gap-8 overflow-hidden">
    <!-- 지도 영역 -->
    <div id="map-container" class="relative w-full h-screen">
      <div id="map" class="w-full h-full"></div>

      <div class="absolute top-4 right-4 w-72 bg-white p-6 rounded-xl shadow-lg space-y-6">
        <h3>무등산국립공원 산불관리 현황</h3>
        <P>진화자원: 고성능 산불진화차량(벤츠유니목-U5023 중량 8.5t, 물탱크 4,000L, 방수량 분당 2,800L)</P>
        <p>장비현황: 감시카메라3대, 진화차량4대, 팀진화장비, 개인진화장비, 기타장비</p>
        <p>총 탐방로: 37구간 96.76km / 개방 탐방로: 36구간 95.96km / 통제 탐방로: 1구간 0.8km</p>
        <p>감시초소 0개, 통제소 2개, 인화물질보관함 4개</p>
        <p>산불 집중관리 지구: 제1수원지 편백나무 숲, 주남마을, 덕산골, 소태골, 등촌마을, 요산요수, 풍암제, 화암마을, 배재마을, 평촌마을, 덕의마을, 금곡마을, 안양암</p>
        <p>인근사찰: 증심사, 약사사, 문빈정사, 원효사, 관음암, 영광사, 안양암, 명지암, 광륵사</p>
      </div>
    </div>

    <!-- 제어판 -->
    <div class="w-full lg:w-1/4 bg-white p-4 rounded-xl shadow-lg space-y-4">
      <div class="space-y-3">
        <h2 class="text-xl font-bold text-gray-800">좌표/주소 위치검색</h2>
        
        <hr class="border-gray-200"/>
        <button id="toggleMapTypeBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm">
          지도/위성 전환 </button>
        <button id="addPointBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm">
          지도에서 클릭하여 표시 </button>
        <button onclick="window.open('https://fd.forest.go.kr', '_blank', 'noopener')" class="w-full mt-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm"> 
          실시간 산불정보 </button> 
        <button onclick="window.open('https://sanbul.forest.go.kr', '_blank', 'noopener')" class="w-full mt-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm"> 
          산불상황관제시스템 </button> 
        <button onclick="window.open('http://forestfire.nifos.go.kr', '_blank', 'noopener')" class="w-full mt-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm"> 
          산불위험예보시스템 </button> 
        <button onclick="window.open('https://mudeung.github.io/rescue/monitorcall.html', '_blank', 'noopener')" class="w-full mt-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm"> 
          비상대응 상황판 </button> 
        <button onclick="window.open('https://www.knps.or.kr/front/portal/safe/acsCtrList.do?menuNo=8000340', '_blank', 'noopener')" class="w-full mt-1 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-1.5 px-3 rounded-lg shadow-md text-sm"> 
          탐방로 통제정보 </button>

        <hr class="border-gray-200"/>

        <div class="space-y-2">
          <h3 class="text-xl font-bold text-gray-800">상세내용</h3>
          <div id="infoPanel" class="info-panel bg-gray-50 p-3 rounded-lg border border-gray-200 text-gray-700 text-sm">
            마커를 클릭하여 상세 정보를 확인하세요.
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Naver Maps API -->
 <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=g2u4orbiqf&submodules=geocoder"></script>
 <script>
initMap(); // 지도 초기화

document.getElementById("addByAddressBtn").addEventListener("click", () => {
  const address = document.getElementById("addressInput").value;

  if (!address) {
    document.getElementById("infoPanel").innerHTML =
      "<strong class='text-red-500'>오류:</strong> 주소를 입력하세요.";
    return;
  }

  naver.maps.Service.geocode({ query: address }, function(status, response) {

    if (status !== naver.maps.Service.Status.OK) {
      document.getElementById("infoPanel").innerHTML =
        "<strong class='text-red-500'>주소 검색 실패</strong>";
      return;
    }

    if (!response.v2.addresses || response.v2.addresses.length === 0) {
      document.getElementById("infoPanel").innerHTML =
        "<strong class='text-red-500'>검색 결과가 없습니다.</strong>";
      return;
    }

    const result = response.v2.addresses[0];
    const lat = parseFloat(result.y);
    const lng = parseFloat(result.x);

    map.setCenter(new naver.maps.LatLng(lat, lng));
    map.setZoom(15);

    landslideData.push({
      lat: lat,
      lng: lng,
      type: "normal",
      date: new Date().toISOString().slice(0, 10),
      description: "주소 입력 위치 (" + address + ")"
    });

    renderMarkers();

    document.getElementById("infoPanel").innerHTML =
      "주소 위치가 지도에 표시되었습니다.<br><strong>위도:</strong> " + lat +
      "<br><strong>경도:</strong> " + lng;

    document.getElementById("addressInput").value = "";
  });
});
</script>
</body>
</html>


