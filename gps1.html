<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“• êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ ğŸ“Œ</title>

    <!-- ì¹´ì¹´ì˜¤ ì§€ë„ API -->
    <script type="text/javascript"
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ff9e145029506d6e4c72d1f2b01ea424&libraries=services"></script>

    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h1, h2, h3, h4, h5 { text-align: center; }
        button { font-size: 16px; padding: 10px 15px; margin: 5px; }
        .coordinate-box {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            font-weight: bold;
        }
        #map { height: 400px; width: 100%; margin-top: 20px; }
        .GPS-link {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            text-align: center;
            background-color: #f4f4f4;
        }
        a { text-decoration: none; color: #2DB400; font-weight: bold; }
    </style>
</head>

<body>

<h4>[ ë¬´ë“±ì‚°êµ­ë¦½
<h1>ğŸ†˜ êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ</h1>

<h5>
1. ë‚´ ìœ„ì¹˜ í™•ì¸<br>
2. ì§€ë„ì— í˜„ì¬ ìœ„ì¹˜ í‘œì‹œ<br>
3. êµ¬ì¡°ëŒ€ì— ìœ„ë„ / ê²½ë„ ì „ë‹¬<br>
4. ìœ„ì¹˜ ê³µìœ  ë˜ëŠ” ë„¤ì´ë²„ ì§€ë„ ë”°ë¼ê°€ê¸°
</h5>

<hr>

<div style="text-align:center;">
    <button id="getLocation">ğŸŒ ë‚´ ìœ„ì¹˜ í™•ì¸</button>
    <button id="shareLocation">ğŸ“² ìœ„ì¹˜ ê³µìœ </button>
</div>

<div class="coordinate-box" id="locationDisplay">ìœ„ë„: , ê²½ë„: </div>
<div class="coordinate-box" id="dmsCoordinates">ë„ë¶„ì´ˆ: </div>

<div id="map"></div>

<script>
let map, marker, currentLat, currentLng;

// ì¹´ì¹´ì˜¤ ì§€ë„
function initMap(lat, lng) {
    const pos = new kakao.maps.LatLng(lat, lng);
    map = new kakao.maps.Map(document.getElementById('map'), {
        center: pos,
        level: 3
    });
    marker = new kakao.maps.Marker({ position: pos, map: map });
}

// ìœ„ì¹˜ í™•ì¸
document.getElementById('getLocation').onclick = () => {
    navigator.geolocation.getCurrentPosition(showPosition, () => {
        alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    });
};

function showPosition(position) {
    currentLat = position.coords.latitude;
    currentLng = position.coords.longitude;

    document.getElementById('locationDisplay').textContent =
        `ìœ„ë„: ${currentLat}, ê²½ë„: ${currentLng}`;

    document.getElementById('dmsCoordinates').textContent =
        `ë„ë¶„ì´ˆ: ${convertToDMS(currentLat,'lat')}, ${convertToDMS(currentLng,'lng')}`;

    initMap(currentLat, currentLng);
}

// ë„ë¶„ì´ˆ ë³€í™˜
function convertToDMS(deg, type) {
    const d = Math.floor(Math.abs(deg));
    const m = Math.floor((Math.abs(deg) - d) * 60);
    const s = ((Math.abs(deg) - d - m / 60) * 3600).toFixed(2);
    const dir = type === 'lat' ? (deg >= 0 ? 'N' : 'S') : (deg >= 0 ? 'E' : 'W');
    return `${d}Â° ${m}' ${s}" ${dir}`;
}

// ğŸ“² ìœ„ì¹˜ ê³µìœ  + ë„¤ì´ë²„ ì§€ë„ ë”°ë¼ê°€ê¸°
document.getElementById("shareLocation").onclick = () => {
    if (!currentLat || !currentLng) {
        alert("ë¨¼ì € ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
        return;
    }

    const googleMap = `https://www.google.com/maps?q=${currentLat},${currentLng}`;
    const kakaoMap  = `https://map.kakao.com/link/map/Location,${currentLat},${currentLng}`;
    const naverMap  = `https://map.naver.com/v5/?c=${currentLng},${currentLat},15`;
    const naverFollow = `https://map.naver.com/v5/?c=${currentLng},${currentLat},15&mode=location`;

    const msg =
`ğŸš¨ êµ¬ì¡°ìš”ì²­ GPS ìœ„ì¹˜

ìœ„ë„: ${currentLat}
ê²½ë„: ${currentLng}

ğŸ“ ì§€ë„ ìœ„ì¹˜ ê³µìœ 
ë„¤ì´ë²„ì§€ë„: ${naverMap}

ğŸ§­ ë„¤ì´ë²„ ì§€ë„ ë”°ë¼ê°€ê¸°
ë„¤ì´ë²„ì§€ë„(ë”°ë¼ê°€ê¸°): ${naverFollow}

ì¹´ì¹´ì˜¤ì§€ë„: ${kakaoMap}
êµ¬ê¸€ì§€ë„: ${googleMap}`;

    if (navigator.share) {
        navigator.share({
            title: "[êµ¬ì¡°ìš”ì²­] ìœ„ì¹˜ ê³µìœ ",
            text: msg,
            url: naverMap
        });
    } else {
        alert(msg);
    }
};
</script>

<hr>

<div class="GPS-link">
    <a href="https://www.whereurl.com/" target="_blank">ğŸ“¡ whereUrl ìœ„ì¹˜ê³µìœ </a>
</div>

<div class="GPS-link">
    <a href="https://discord.gg/ryaMRTAhwP" target="_blank">
        ğŸ¸ êµ­ë¦½ê³µì› ì•ˆì „ì‚¬ê³  ì—°êµ¬íšŒ
    </a>
</div>

</body>
</html>
