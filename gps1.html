<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“• êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ ğŸ“Œ</title>

    <!-- ì¹´ì¹´ì˜¤ ì§€ë„ API -->
    <script type="text/javascript"
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ff9e145029506d6e4c72d1f2b01ea424&libraries=services"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        h2, h3 {
            text-align: center;
        }
        .coordinate-box {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        #map {
            height: 400px;
            width: 100%;
            margin-top: 20px;
        }
        #locationDisplay, #dmsCoordinates, .info {
            margin-top: 10px;
            font-weight: bold;
        }
        .GPS-link {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            text-align: center;
            background-color: #f4f4f4;
        }
        a {
            text-decoration: none;
            color: #7289DA;
            font-weight: bold;
        }
    </style>
</head>

<body>

<h4><center>[ êµ­ë¦½ê³µì› íŠ¹ìˆ˜ì‚°ì•…êµ¬ì¡°ëŒ€ ]</center></h4>
<h1>ğŸ†˜ êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ</h1>

<h5>
1. ë‚´ ìœ„ì¹˜ í™•ì¸ ëˆ„ë¦„.<br>
2. ì§€ë„ì— ë‚´ ìœ„ì¹˜ í‘œì‹œë¨.<br>
3. êµ¬ì¡°ëŒ€ì—ê²Œ [ìœ„ë„] [ê²½ë„] ë¶ˆëŸ¬ ì£¼ì„¸ìš”!<br>
4. í™”ë©´ìº¡ì²˜ & ìœ„ì¹˜ ê³µìœ ë¡œ êµ¬ì¡°ëŒ€ ì „ì†¡ ê°€ëŠ¥!!
</h5>

<br>

<button id="getLocation">ğŸŒ ë‚´ ìœ„ì¹˜ í™•ì¸</button>
<button id="shareLocation">ğŸ“² ìœ„ì¹˜ ê³µìœ </button>

<div class="coordinate-box" id="locationDisplay">ìœ„ë„: , ê²½ë„: </div>
<div class="coordinate-box" id="dmsCoordinates">ë„ë¶„ì´ˆ: </div>

<div id="myLocation" class="info">ğŸ“ Kakao Map Location</div>
<div id="map"></div>

<script>
let map, marker, currentLat, currentLng;

// ì¹´ì¹´ì˜¤ ì§€ë„ ì´ˆê¸°í™”
function initMap(lat, lng) {
    const position = new kakao.maps.LatLng(lat, lng);
    map = new kakao.maps.Map(document.getElementById('map'), {
        center: position,
        level: 3
    });
    marker = new kakao.maps.Marker({
        position: position,
        map: map
    });
}

// ìœ„ì¹˜ í™•ì¸
document.getElementById('getLocation').addEventListener('click', function() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
        alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    }
});

function showPosition(position) {
    currentLat = position.coords.latitude;
    currentLng = position.coords.longitude;

    document.getElementById('locationDisplay').textContent =
        `ìœ„ë„: ${currentLat}, ê²½ë„: ${currentLng}`;

    const dmsLat = convertToDMS(currentLat, 'lat');
    const dmsLng = convertToDMS(currentLng, 'lng');
    document.getElementById('dmsCoordinates').textContent =
        `ë„ë¶„ì´ˆ: ${dmsLat}, ${dmsLng}`;

    initMap(currentLat, currentLng);
}

function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            alert("ì‚¬ìš©ìê°€ ìœ„ì¹˜ ì •ë³´ë¥¼ ìš”ì²­í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
            break;
        case error.POSITION_UNAVAILABLE:
            alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            break;
        case error.TIMEOUT:
            alert("ìœ„ì¹˜ ì •ë³´ ìš”ì²­ì´ ì‹œê°„ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.");
            break;
        default:
            alert("ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    }
}

// ë„ë¶„ì´ˆ ë³€í™˜
function convertToDMS(degree, type) {
    const d = Math.floor(Math.abs(degree));
    const m = Math.floor((Math.abs(degree) - d) * 60);
    const s = ((Math.abs(degree) - d - m / 60) * 3600).toFixed(2);
    const dir = type === 'lat'
        ? (degree >= 0 ? 'N' : 'S')
        : (degree >= 0 ? 'E' : 'W');
    return `${d}Â° ${m}' ${s}" ${dir}`;
}

// ğŸ“² ìœ„ì¹˜ ê³µìœ  (ë„¤ì´ë²„ ì§€ë„ ì¶”ê°€)
document.getElementById("shareLocation").addEventListener("click", function() {
    if (currentLat && currentLng) {

        const googleMapLink = `https://www.google.com/maps?q=${currentLat},${currentLng}`;
        const kakaoMapLink  = `https://map.kakao.com/link/map/Location,${currentLat},${currentLng}`;
        const naverMapLink  = `https://map.naver.com/v5/search/${currentLat},${currentLng}`;

        const shareMessage = `
ğŸš¨ ìš”êµ¬ì¡°ì í˜„ìœ„ì¹˜ ì¢Œí‘œ

ìœ„ë„: ${currentLat}
ê²½ë„: ${currentLng}

ğŸ“ ì§€ë„ ë°”ë¡œê°€ê¸°
ë„¤ì´ë²„ ì§€ë„: ${naverMapLink}
ì¹´ì¹´ì˜¤ ì§€ë„: ${kakaoMapLink}
êµ¬ê¸€ ì§€ë„: ${googleMapLink}
`;

        if (navigator.share) {
            navigator.share({
                title: "[êµ¬ì¡°ìš”ì²­] GPSì¢Œí‘œ ê³µìœ ",
                text: shareMessage,
                url: naverMapLink
            });
        } else {
            alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ê³µìœ ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n' + shareMessage);
        }
    } else {
        alert('ìœ„ì¹˜ë¥¼ ë¨¼ì € í™•ì¸í•œ í›„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
    }
});
</script>

<br>

<div class="GPS-link">
    <a href="https://www.whereurl.com/" target="_blank">ì¡°ë‚œì ìœ„ì¹˜ê³µìœ  whereUrl</a>
</div>

<div class="GPS-link">
    <a href="https://discord.gg/ryaMRTAhwP" target="_blank">
        ë¬¸ì˜: ğŸ¸ êµ­ë¦½ê³µì› ì•ˆì „ì‚¬ê³  ì—°êµ¬íšŒ
    </a>
</div>

</body>
</html>
