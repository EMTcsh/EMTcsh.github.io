<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ†˜ êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ</title>

    <!-- ì¹´ì¹´ì˜¤ ì§€ë„ API -->
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ff9e145029506d6e4c72d1f2b01ea424"></script>

    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h1, h4, h5 { text-align: center; }
        button { font-size: 16px; padding: 10px 15px; margin: 5px; }
        .box {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            font-weight: bold;
        }
        #map { height: 400px; width: 100%; margin-top: 15px; }
        .naver-guide {
            margin-top: 15px;
            padding: 12px;
            background: #e8f5e9;
            border: 1px solid #2DB400;
            border-radius: 6px;
            font-size: 14px;
        }
    </style>
</head>

<body>

<h4>[ êµ­ë¦½ê³µì› íŠ¹ìˆ˜ì‚°ì•…êµ¬ì¡°ëŒ€ ]</h4>
<h1>ğŸ†˜ êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ</h1>

<h5>
1. [ë‚´ ìœ„ì¹˜ í™•ì¸] í´ë¦­<br>
2. êµ¬ì¡°ëŒ€ì— ìœ„ë„Â·ê²½ë„ ì „ë‹¬<br>
3. ì´ë™ ì¤‘ì—ëŠ” ë„¤ì´ë²„ ì§€ë„ ì‚¬ìš©
</h5>

<hr>

<div style="text-align:center;">
    <button id="getLocation">ğŸŒ ë‚´ ìœ„ì¹˜ í™•ì¸</button>
    <button id="shareLocation">ğŸ“² êµ¬ì¡°ìš”ì²­ ê³µìœ </button>
</div>

<div class="box" id="locationDisplay">ìœ„ë„: , ê²½ë„: </div>
<div class="box" id="dmsCoordinates">ë„ë¶„ì´ˆ: </div>

<div id="map"></div>

<!-- ë„¤ì´ë²„ ì§€ë„ ì•ˆë‚´ -->
<div class="naver-guide">
ğŸŸ¢ <strong>ì´ë™ ì¤‘ ìœ„ì¹˜ í™•ì¸ (ë„¤ì´ë²„ ì§€ë„)</strong><br>
1ï¸âƒ£ ì•„ë˜ ê³µìœ  ë²„íŠ¼ í´ë¦­ í›„ ë„¤ì´ë²„ ì§€ë„ ì—´ë¦¼<br>
2ï¸âƒ£ ì§€ë„ ì˜¤ë¥¸ìª½ í•˜ë‹¨ <strong>[â— ë‚´ ìœ„ì¹˜]</strong> ë²„íŠ¼ í´ë¦­<br>
3ï¸âƒ£ íŒŒë€ ì ì´ ì´ë™í•˜ë©° <strong>ë”°ë¼ê°€ê¸° ì‹œì‘</strong>
</div>

<script>
let map, marker, currentLat, currentLng;

// ì¹´ì¹´ì˜¤ ì§€ë„ (ì •í™•í•œ ìœ„ì¹˜ ê³ ì •)
function initMap(lat, lng) {
    const pos = new kakao.maps.LatLng(lat, lng);
    map = new kakao.maps.Map(document.getElementById('map'), {
        center: pos,
        level: 3
    });
    marker = new kakao.maps.Marker({
        position: pos,
        map: map
    });
}

// ìœ„ì¹˜ í™•ì¸
document.getElementById('getLocation').onclick = () => {
    navigator.geolocation.getCurrentPosition(showPosition, () => {
        alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    });
};

function showPosition(p) {
    currentLat = p.coords.latitude;
    currentLng = p.coords.longitude;

    document.getElementById('locationDisplay').textContent =
        `ìœ„ë„: ${currentLat}, ê²½ë„: ${currentLng}`;

    document.getElementById('dmsCoordinates').textContent =
        `ë„ë¶„ì´ˆ: ${toDMS(currentLat,'lat')} , ${toDMS(currentLng,'lng')}`;

    initMap(currentLat, currentLng);
}

function toDMS(deg, type) {
    const d = Math.floor(Math.abs(deg));
    const m = Math.floor((Math.abs(deg) - d) * 60);
    const s = ((Math.abs(deg) - d - m/60) * 3600).toFixed(2);
    const dir = type === 'lat' ? (deg >= 0 ? 'N' : 'S') : (deg >= 0 ? 'E' : 'W');
    return `${d}Â° ${m}' ${s}" ${dir}`;
}

// ğŸ“² êµ¬ì¡°ìš”ì²­ ê³µìœ 
document.getElementById('shareLocation').onclick = () => {
    if (!currentLat || !currentLng) {
        alert("ë¨¼ì € ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
        return;
    }

    const kakaoMap = `https://map.kakao.com/link/map/Location,${currentLat},${currentLng}`;
    const naverMap = `https://map.naver.com/v5/`; // ğŸ”´ ì¢Œí‘œ ì™„ì „ ì œê±°

    const msg =
`ğŸš¨ êµ¬ì¡°ìš”ì²­ ìœ„ì¹˜ ì •ë³´

ìœ„ë„: ${currentLat}
ê²½ë„: ${currentLng}

ğŸ“ ì •í™•í•œ ìœ„ì¹˜ (ì¹´ì¹´ì˜¤ ì§€ë„)
${kakaoMap}

ğŸŸ¢ ì´ë™ ì¤‘ ìœ„ì¹˜ í™•ì¸ (ë„¤ì´ë²„ ì§€ë„)
ë„¤ì´ë²„ ì§€ë„ ì—´ê¸° â†’ [â— ë‚´ ìœ„ì¹˜] ë²„íŠ¼ í´ë¦­ â†’ ë”°ë¼ê°€ê¸°`;

    if (navigator.share) {
        navigator.share({
            title: "[êµ¬ì¡°ìš”ì²­] í˜„ì¬ ìœ„ì¹˜",
            text: msg,
            url: kakaoMap
        });
    } else {
        alert(msg);
    }

    // ë„¤ì´ë²„ ì§€ë„ë„ í•¨ê»˜ ì—´ê¸° (ì„ íƒ)
    window.open(naverMap, "_blank");
};
</script>

</body>
</html>
