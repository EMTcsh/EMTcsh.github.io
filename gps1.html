<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“• êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ ğŸ“Œ</title>

    <!-- ì¹´ì¹´ì˜¤ ì§€ë„ API -->
    <script type="text/javascript"
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ff9e145029506d6e4c72d1f2b01ea424&libraries=services"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        h1, h2, h3, h4, h5 {
            text-align: center;
        }
        button {
            font-size: 16px;
            padding: 10px 15px;
            margin: 5px;
        }
        .coordinate-box {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            font-weight: bold;
        }
        #map {
            height: 400px;
            width: 100%;
            margin-top: 20px;
        }
        .GPS-link {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            text-align: center;
            background-color: #f4f4f4;
        }
        a {
            text-decoration: none;
            color: #2DB400;
            font-weight: bold;
        }
    </style>
</head>

<body>

<h4>[ êµ­ë¦½ê³µì› íŠ¹ìˆ˜ì‚°ì•…êµ¬ì¡°ëŒ€ ]</h4>
<h1>ğŸ†˜ êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ</h1>

<h5>
1. [ë‚´ ìœ„ì¹˜ í™•ì¸] ë²„íŠ¼ í´ë¦­<br>
2. ì§€ë„ì— í˜„ì¬ ìœ„ì¹˜ í‘œì‹œ<br>
3. êµ¬ì¡°ëŒ€ì—ê²Œ ìœ„ë„ / ê²½ë„ ì „ë‹¬<br>
4. ìœ„ì¹˜ ê³µìœ  ë²„íŠ¼ìœ¼ë¡œ ì¦‰ì‹œ ì „ì†¡
</h5>

<hr>

<div style="text-align:center;">
    <button id="getLocation">ğŸŒ ë‚´ ìœ„ì¹˜ í™•ì¸</button>
    <button id="shareLocation">ğŸ“² ìœ„ì¹˜ ê³µìœ </button>
</div>

<div class="coordinate-box" id="locationDisplay">ìœ„ë„: , ê²½ë„: </div>
<div class="coordinate-box" id="dmsCoordinates">ë„ë¶„ì´ˆ: </div>

<div id="map"></div>

<script>
let map, marker, currentLat, currentLng;

// ì¹´ì¹´ì˜¤ ì§€ë„ ì´ˆê¸°í™”
function initMap(lat, lng) {
    const position = new kakao.maps.LatLng(lat, lng);
    map = new kakao.maps.Map(document.getElementById('map'), {
        center: position,
        level: 3
    });
    marker = new kakao.maps.Marker({
        position: position,
        map: map
    });
}

// ìœ„ì¹˜ í™•ì¸
document.getElementById('getLocation').addEventListener('click', function() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
        alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    }
});

function showPosition(position) {
    currentLat = position.coords.latitude;
    currentLng = position.coords.longitude;

    document.getElementById('locationDisplay').textContent =
        `ìœ„ë„: ${currentLat}, ê²½ë„: ${currentLng}`;

    document.getElementById('dmsCoordinates').textContent =
        `ë„ë¶„ì´ˆ: ${convertToDMS(currentLat, 'lat')}, ${convertToDMS(currentLng, 'lng')}`;

    initMap(currentLat, currentLng);
}

function showError(error) {
    alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
}

// ë„ë¶„ì´ˆ ë³€í™˜
function convertToDMS(deg, type) {
    const d = Math.floor(Math.abs(deg));
    const m = Math.floor((Math.abs(deg) - d) * 60);
    const s = ((Math.abs(deg) - d - m / 60) * 3600).toFixed(2);
    const dir = type === 'lat'
        ? (deg >= 0 ? 'N' : 'S')
        : (deg >= 0 ? 'E' : 'W');
    return `${d}Â° ${m}' ${s}" ${dir}`;
}

// ğŸ“² ìœ„ì¹˜ ê³µìœ  (ë„¤ì´ë²„ ì§€ë„ í™”ë©´ ì¤‘ì‹¬ í‘œì‹œ)
document.getElementById("shareLocation").addEventListener("click", function() {
    if (!currentLat || !currentLng) {
        alert("ë¨¼ì € ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
        return;
    }

    const googleMapLink = `https://www.google.com/maps?q=${currentLat},${currentLng}`;
    const kakaoMapLink  = `https://map.kakao.com/link/map/Location,${currentLat},${currentLng}`;
    // ë„¤ì´ë²„ ì§€ë„: ì¢Œí‘œ ê²€ìƒ‰ âŒ / ì§€ë„ í™”ë©´ â­•
    const naverMapLink  = `https://map.naver.com/v5/?c=${currentLng},${currentLat},15`;

    const shareMessage =
`ğŸš¨ êµ¬ì¡°ìš”ì²­ GPS ì¢Œí‘œ

ìœ„ë„: ${currentLat}
ê²½ë„: ${currentLng}

ğŸ“ ì§€ë„ ë°”ë¡œë³´ê¸°
ë„¤ì´ë²„ì§€ë„ (ì§€ë„í™”ë©´): ${naverMapLink}
ì¹´ì¹´ì˜¤ì§€ë„: ${kakaoMapLink}
êµ¬ê¸€ì§€ë„: ${googleMapLink}`;

    if (navigator.share) {
        navigator.share({
            title: "[êµ¬ì¡°ìš”ì²­] í˜„ì¬ ìœ„ì¹˜",
            text: shareMessage,
            url: naverMapLink
        });
    } else {
        alert(shareMessage);
    }
});
</script>

<hr>

<div class="GPS-link">
    <a href="https://www.whereurl.com/" target="_blank">ğŸ“¡ whereUrl ìœ„ì¹˜ê³µìœ </a>
</div>

<div class="GPS-link">
    <a href="https://discord.gg/ryaMRTAhwP" target="_blank">ğŸ¸ êµ­ë¦½ê³µì› ì•ˆì „ì‚¬ê³  ì—°êµ¬íšŒ</a>
</div>

</body>
</html>
